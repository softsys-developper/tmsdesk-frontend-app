import{m as T,n as k,V as c,l as y,W as S,A as g,Y as $,a2 as U,p as B,Z as F,X as M,d as E,a as C,c as b,w as h,b as u,t as D,v as N,e as m,x as w,u as a,F as L,a3 as R,g as f,o as I,_ as O,r as V,f as j,h as P,i as Q,a4 as H,j as W,k as X}from"./index-Di6rTnN9.js";import{C as Y}from"./compte.tables-DpGsv6Zp.js";const v=()=>{const{readData:A,createData:_}=B(),{EmptyFields:n}=F(),e=T({loading:!1,loadingCreate:!1}),r=k([]);r.value=c().Comptes;const{toast:l}=y(),d=S(()=>c().Comptes),t=s=>s.map(i=>({id:i.id,nom:i.nom,solde:i.solde,date_creation:M(i.created_at).format("l")}));return{FindCompteAll:()=>{e.loading=!0,A(g.BANQUE_LIST).then(s=>{c().Comptes=t(s.datas),e.loading=!1}).catch(()=>{e.loading=!1})},CreateCompte:async s=>(e.loadingCreate=!0,{data:await _(g.BANQUE_CREATE,s).then(o=>{if(o){n(s),e.loadingCreate=!1;let p=c().Comptes;const x=t([o.data]);p.unshift(...x),c().Comptes=p,$().open=!1,l({title:"EnregistrÃ©",description:o.message})}}).catch(o=>{if(e.loadingCreate=!1,console.log(o),o){const p=Object.keys(o.response.data.errors);l(p?{title:p[0],variant:"destructive",description:o.response.data.errors[p[0]][0]}:{title:"Erreur",variant:"destructive",description:o.response.data.message})}})}),CompteUpdate:(s,i)=>{U(e,c(),"Comptes",t).SetUpdate(g.BANQUE_UPDATE,s,i)},CompteDelete:s=>{U(e,c(),"Comptes",t).SetDelete(g.BANQUE_REMOVE,s)},stateComptes:r,setCompte:e,storeComptes:d}},Z=[{label:"Libelle du compte",type:"text",placeholder:"Libelle du compte",name:"nom",value:"",select:[]}],q={class:"w-full space-y-2"},z={class:""},G=E({__name:"compte.modal",setup(A){const{CreateCompte:_,CompteUpdate:n,setCompte:e}=v(),r=l=>{console.log(f().isUpdate);let d=new FormData(l.target);f().isUpdate.is?n(f().isUpdate.id,d):_(d)};return(l,d)=>(C(),b(R,{Func:r,loading:a(e).loadingCreate},{form:h(()=>[u("div",q,[(C(!0),D(L,null,N(a(Z),t=>(C(),D("div",z,[m(w,{title:t.label,name:t.name,label:t.label,type:t.type,placeholder:t.placeholder,select:t.select},null,8,["title","name","label","type","placeholder","select"])]))),256))])]),_:1},8,["loading"]))}}),J={class:"flex flex-col w-full gap-4 bg-white rounded-lg mb-8"},K={class:"flex gap-2"},ee=u("button",{class:"bg-blue-500 text-white rounded-lg px-4 h-full font-bold flex gap-1 items-center"},[u("i",{class:"ri-line-chart-line"}),u("span",{class:"hidden lg:flex"},"Transactions")],-1),ie=E({__name:"compte_compta.page",setup(A){const{FindCompteAll:_,storeComptes:n,CompteDelete:e,setCompte:r}=v();return I(()=>{_()}),(l,d)=>{const t=V("RouterLink");return C(),b(O,null,{content:h(()=>[u("section",J,[m(P,{title:"COMPTABILITES | Comptes bancaire"},{created:h(()=>[u("div",K,[m(t,{class:"h-10",to:{name:"COMPTA_TRANSACTION"}},{default:h(()=>[ee]),_:1}),m(G,{name:"Ajouter un compte",title:a(f)().isUpdate.is?"Modifier Clients":"Ajouter Clients"},null,8,["title"]),m(j,{funDelete:a(e),id:a(f)().isDelete.id},null,8,["funDelete","id"])])]),_:1}),a(n).length!=0?(C(),b(Q,{key:0,dataTables:a(n),MenuActions:a(H),display:a(Y)},null,8,["dataTables","MenuActions","display"])):W("",!0),m(X,{loading:a(r).loading,data:a(n),name:"Aucune Comptes"},null,8,["loading","data"])])]),_:1})}}});export{ie as default};
