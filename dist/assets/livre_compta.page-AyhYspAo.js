import{P as C,Q as A,ab as o,O as h,s as x,R as v,ad as y,S as F,ae as T,d as S,o as D,c as L,w as f,_ as E,a as p,b as k,e as m,h as w,u as i,i as I,an as M,j as O,k as $}from"./index-DVkg-fdp.js";const N=[{label:"Libellé",field:"libelle",status:null,color:null,bgColor:null}],R=()=>{const{readData:u,createData:c}=F(),{EmptyFields:r}=T(),e=C({loading:!1,loadingCreate:!1}),d=A([]);d.value=o().Livres;const{toast:l}=h(),_=s=>s.map(t=>({numero_bon_de_caisse:t.numero_bon_de_caisse,designation:t.designation,recepteur:t.recepteur,montant:t.montant,type_transaction:`<p class="' py-1  capitalize max-w-min rounded-md px-4 flex justify-center font-bold text-xs text-white ' ${t.type_transaction!=="entree"?"bg-red-500":"bg-green-500"}">${t.type_transaction}</p>`,date_transaction:t.date_transaction})),g=x(()=>o().Livres);return{FindLivreAll:()=>{e.loading=!0,u(v.LIVRE_LIST).then(s=>{o().Livres=_(s.datas),e.loading=!1}).catch(()=>{e.loading=!1})},FindLivreOne:()=>{},CreateLivre:async s=>(e.loadingCreate=!0,{data:await c(v.CAISSE_TRANSACTION_CREATE,s).then(a=>{if(a){r(s),e.loadingCreate=!1;let n=o().Livres;const b=_([a.data]);n.unshift(...b),o().Livres=n,y().open=!1,l({title:"Enregistré",description:a.message})}}).catch(a=>{if(e.loadingCreate=!1,a){const n=Object.keys(a.response.data.errors);l(n?{title:n[0],variant:"destructive",description:a.response.data.errors[n[0]][0]}:{title:"error",variant:"destructive",description:a.response.data.message})}})}),FindLivreUpdate:()=>{},FindLivreDelete:()=>{},stateLivres:d,setLivre:e,storeLivres:g}},B={class:"flex flex-col w-full gap-4 bg-white rounded-lg mb-8"},G=S({__name:"livre_compta.page",setup(u){const{FindLivreAll:c,storeLivres:r,setLivre:e}=R();return D(()=>{c()}),(d,l)=>(p(),L(E,null,{content:f(()=>[k("section",B,[m(w,{title:"COMPTABILITES | Grand livre"},{created:f(()=>[]),_:1}),i(r).length!=0?(p(),L(I,{key:0,dataTables:i(r),MenuActions:i(M),display:i(N)},null,8,["dataTables","MenuActions","display"])):O("",!0),m($,{loading:i(e).loading,data:i(r),name:"Aucune transaction"},null,8,["loading","data"])])]),_:1}))}});export{G as default};
