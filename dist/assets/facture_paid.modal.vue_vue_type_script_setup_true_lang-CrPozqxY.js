import{P as E,Q as U,ab as n,O as v,s as T,R as o,aj as I,ae as f,S as D,ac as A,d as S,o as x,a as _,c as R,w as q,b as w,V as C,W as k,e as B,X as L,u as b,Y as O,am as M,g}from"./index-aC3qMT-u.js";const V=()=>{const{readData:P,createData:p,showData:m}=D(),{EmptyFields:F}=A(),e=E({loading:!1,loadingCreate:!1,facture:{}}),d=U([]);d.value=n().FacturePaids;const{toast:u}=v(),a=s=>s.map(t=>({id:t.id,recepteur:t.recepteur,montant:t.montant,type_transaction:`<p class="' py-1  capitalize max-w-min rounded-md px-4 flex justify-center font-bold text-xs text-white ' ${t.type_transaction!=="entrée"?"bg-red-500":"bg-green-500"}">${t.type_transaction}</p>`,banque:t.banque.nom,date_transaction:t.date_transaction})),r=T(()=>n().FacturePaids);return{FindFacturePaidAll:()=>{e.loading=!0,P(o.FACTURE_PAID_LIST).then(s=>{n().FacturePaids=a(s.datas),e.loading=!1}).catch(()=>{e.loading=!1})},FindFacturePaidOne:s=>{e.loading=!0,m(o.FACTURE_PAID_DETAIL,s).then(t=>{e.facture=t.facture,n().FacturePaids=a(t.datas),e.loading=!1}).catch(()=>{e.loading=!1})},CreateFacturePaid:async s=>(e.loadingCreate=!0,{data:await p(o.FACTURE_PAID_CREATE,s).then(c=>{if(c){F(s),e.loadingCreate=!1;let l=n().FacturePaids;const y=a([c.data]);l.unshift(...y),n().FacturePaids=l,I().open=!1,u({title:"Enregistré",description:c.message})}}).catch(c=>{if(e.loadingCreate=!1,c){const l=Object.keys(c.response.data.errors);u(l?{title:l[0],variant:"destructive",description:c.response.data.errors[l[0]][0]}:{title:"error",variant:"destructive",description:c.response.data.message})}})}),FacturePaidUpdate:(s,t)=>{f(e,n(),"FacturePaids",a).SetUpdate(o.FACTURE_PAID_UPDATE,s,t)},FacturePaidDelete:s=>{f(e,n(),"FacturePaids",a).SetDelete(o.FACTURE_PAID_REMOVE,s)},stateFacturePaids:d,setFacturePaid:e,storeFacturePaids:r}},h=[{label:"Numéro Facture",type:"select",placeholder:"Choisir le numéro de la facture",name:"factureId",value:"",select:[]},{label:"Montant à payer",type:"number",placeholder:"Choisir le numéro de la facture",name:"montant",value:"",select:[]},{label:"Mode de paiement",type:"select",placeholder:"Choisir le numéro de la facture",name:"mode_paiement",value:"",select:[{id:"cash",name:"Cash"},{id:"virement",name:"Virement"},{id:"cheque",name:"Cheque"}]},{label:"Banque",type:"select",placeholder:"Choisir la banque",name:"banque",value:"",select:[]},{label:"Désignation",type:"text",placeholder:"Choisir la banque",name:"designation",value:"",select:[]}],j={class:"w-full space-y-2"},N={class:""},X=S({__name:"facture_paid.modal",setup(P){const{CreateFacturePaid:p,FacturePaidUpdate:m,setFacturePaid:F}=V(),{remplacerObjetDansTableau:e}=A(),{readData:d}=D(),u=a=>{let r=new FormData(a.target);g().isUpdate.is?m(g().isUpdate.id,r):p(r)};return x(()=>{n().Factures&&(d(o.BANQUE_LIST).then(a=>{n().Comptes=a.datas,e(h,"name","banque",a.datas)}),d(o.FACTURE_LIST).then(a=>{e(h,"name","factureId",a.datas.map(r=>({id:r.id,name:r.numero_facture})))}))}),(a,r)=>(_(),R(M,{Func:u,loading:b(F).loadingCreate},{form:q(()=>[w("div",j,[(_(!0),C(O,null,k(b(h),i=>(_(),C("div",N,[B(L,{title:i.label,name:i.name,label:i.label,type:i.type,placeholder:i.placeholder,select:i.select},null,8,["title","name","label","type","placeholder","select"])]))),256))])]),_:1},8,["loading"]))}});export{X as _,V as u};
