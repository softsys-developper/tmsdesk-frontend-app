import{P as y,Q as E,ab as o,O as N,s as S,R as p,ad as x,ag as u,S as D,ae as U,ac as k,d as I,o as O,c as C,w as f,_ as B,a as g,b as R,e as A,h as v,u as i,i as w,am as M,j as $,k as P}from"./index-DSVbTKYi.js";import{a as Q}from"./compte.tables-Cp2-EN0C.js";const j=()=>{const{readData:m,createData:d}=D(),{EmptyFields:r}=U(),n=y({loading:!1,loadingCreate:!1}),_=E([]);_.value=o().Compte_transactions;const{toast:c}=N(),T=S(()=>o().Compte_transactions),h=a=>{let e;const t=[];return Object.keys(a).forEach(s=>{s.includes("paiement_")&&t.push(s),a[s]!=null&&(e=s.split("-").length!=1?s.split("-")[1]:s.split("-")[0])}),e},l=a=>a.map(e=>{var t;return{id:e.id,banque:(t=e.banque)==null?void 0:t.nom,montant:e.montant,type_transaction:`<p class="' py-1  capitalize max-w-min rounded-md px-4 flex justify-center font-bold text-xs text-white ' ${e.type_transaction!=="entree"?"bg-red-500":"bg-green-500"}">${e.type_transaction}</p>`,type_paiement:h(e),date_creation:k(e.created_at).format("l")}});return{FindCompte_transactionAll:()=>{n.loading=!0,m(p.BANQUE_TRANSACTION_LIST).then(a=>{o().Compte_transactions=l(a.datas),n.loading=!1}).catch(()=>{n.loading=!1})},CreateCompte_transaction:async a=>(n.loadingCreate=!0,{data:await d(p.BANQUE_TRANSACTION_CREATE,a).then(t=>{if(t){r(a),n.loadingCreate=!1;let s=o().Compte_transactions;const b=l([t.data]);s.unshift(...b),o().Compte_transactions=s,x().open=!1,c({title:"EnregistrÃ©",description:t.message})}}).catch(t=>{if(n.loadingCreate=!1,console.log(t),t){const s=Object.keys(t.response.data.errors);c(s?{title:s[0],variant:"destructive",description:t.response.data.errors[s[0]][0]}:{title:"Erreur",variant:"destructive",description:t.response.data.message})}})}),Compte_transactionUpdate:(a,e)=>{u(n,o(),"Compte_transactions",l).SetUpdate(p.BANQUE_TRANSACTION_UPDATE,a,e)},Compte_transactionDelete:a=>{u(n,o(),"Compte_transactions",l).SetDelete(p.BANQUE_TRANSACTION_REMOVE,a)},stateCompte_transactions:_,setCompte_transaction:n,storeCompte_transactions:T}},F={class:"flex flex-col w-full gap-4 bg-white rounded-lg mb-8"},J=I({__name:"compte_transaction_compta.page",setup(m){const{FindCompte_transactionAll:d,storeCompte_transactions:r,setCompte_transaction:n}=j();return O(()=>{d()}),(_,c)=>(g(),C(B,null,{content:f(()=>[R("section",F,[A(v,{title:"COMPTABILITES | Transactions bancaire"},{created:f(()=>[]),_:1}),i(r).length!=0?(g(),C(w,{key:0,dataTables:i(r),MenuActions:i(M),display:i(Q)},null,8,["dataTables","MenuActions","display"])):$("",!0),A(P,{loading:i(n).loading,data:i(r),name:"Aucune Compte_transactions"},null,8,["loading","data"])])]),_:1}))}});export{J as default};
