import{m as v,n as E,V as n,l as U,W as T,A as o,Y as x,a2 as f,p as A,Z as D,d as I,o as S,a as _,c as q,w as R,b as w,t as C,v as k,e as B,x as L,u as g,F as O,a3 as V,g as b}from"./index-BqCWhEnE.js";const M=()=>{const{readData:P,createData:p,showData:m}=A(),{EmptyFields:F}=D(),e=v({loading:!1,loadingCreate:!1,facture:{}}),d=E([]);d.value=n().FacturePaids;const{toast:u}=U(),a=s=>s.map(t=>({id:t.id,recepteur:t.recepteur,montant:t.montant,type_transaction:`<p class="' py-1  capitalize max-w-min rounded-md px-4 flex justify-center font-bold text-xs text-white ' ${t.type_transaction!=="entrée"?"bg-red-500":"bg-green-500"}">${t.type_transaction}</p>`,banque:t.banque.nom,date_transaction:t.date_transaction})),r=T(()=>n().FacturePaids);return{FindFacturePaidAll:()=>{e.loading=!0,P(o.FACTURE_PAID_LIST).then(s=>{n().FacturePaids=a(s.datas),e.loading=!1}).catch(()=>{e.loading=!1})},FindFacturePaidOne:s=>{e.loading=!0,m(o.FACTURE_PAID_DETAIL,s).then(t=>{e.facture=t.facture,n().FacturePaids=a(t.datas),e.loading=!1}).catch(()=>{e.loading=!1})},CreateFacturePaid:async s=>(e.loadingCreate=!0,{data:await p(o.FACTURE_PAID_CREATE,s).then(c=>{if(c){F(s),e.loadingCreate=!1;let l=n().FacturePaids;const y=a([c.data]);l.unshift(...y),n().FacturePaids=l,x().open=!1,u({title:"Enregistré",description:c.message})}}).catch(c=>{if(e.loadingCreate=!1,c){const l=Object.keys(c.response.data.errors);u(l?{title:l[0],variant:"destructive",description:c.response.data.errors[l[0]][0]}:{title:"error",variant:"destructive",description:c.response.data.message})}})}),FacturePaidUpdate:(s,t)=>{f(e,n(),"FacturePaids",a).SetUpdate(o.FACTURE_PAID_UPDATE,s,t)},FacturePaidDelete:s=>{f(e,n(),"FacturePaids",a).SetDelete(o.FACTURE_PAID_REMOVE,s)},stateFacturePaids:d,setFacturePaid:e,storeFacturePaids:r}},h=[{label:"Numéro Facture",type:"text",placeholder:"Choisir le numéro de la facture",name:"factureId",value:"",select:[]},{label:"Montant à payer",type:"number",placeholder:"Choisir le numéro de la facture",name:"montant",value:"",select:[]},{label:"Type de versement",type:"text",placeholder:"Choisir le numéro de la facture",name:"mode_paiement",value:"",select:[{id:"cash",name:"Cash"},{id:"virement",name:"Virement"},{id:"cheque",name:"Cheque"}]},{label:"Banque",type:"text",placeholder:"Choisir la banque",name:"banque",value:"",select:[]},{label:"Désignation",type:"text",placeholder:"Choisir la banque",name:"designation",value:"",select:[]}],N={class:"w-full space-y-2"},$={class:""},Y=I({__name:"facture_paid.modal",setup(P){const{CreateFacturePaid:p,FacturePaidUpdate:m,setFacturePaid:F}=M(),{remplacerObjetDansTableau:e}=D(),{readData:d}=A(),u=a=>{let r=new FormData(a.target);b().isUpdate.is?m(b().isUpdate.id,r):p(r)};return S(()=>{n().Factures&&(d(o.BANQUE_LIST).then(a=>{n().Comptes=a.datas,e(h,"name","banque",a.datas)}),d(o.FACTURE_LIST).then(a=>{e(h,"name","factureId",a.datas.map(r=>({id:r.id,name:r.numero_facture})))}))}),(a,r)=>(_(),q(V,{Func:u,loading:g(F).loadingCreate},{form:R(()=>[w("div",N,[(_(!0),C(O,null,k(g(h),i=>(_(),C("div",$,[B(L,{title:i.label,name:i.name,label:i.label,type:i.type,placeholder:i.placeholder,select:i.select},null,8,["title","name","label","type","placeholder","select"])]))),256))])]),_:1},8,["loading"]))}});export{Y as _,M as u};
