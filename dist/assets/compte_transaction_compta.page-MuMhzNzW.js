import{m as E,n as N,V as o,l as b,W as S,A as p,Y as x,a2 as u,p as D,Z as U,X as k,d as I,o as B,c as C,w as f,_ as O,a as A,b as v,e as g,h as w,u as i,i as M,a5 as R,j as $,k as V}from"./index-DOJ4ZCQJ.js";import{a as j}from"./compte.tables-DpGsv6Zp.js";const F=()=>{const{readData:m,createData:d}=D(),{EmptyFields:r}=U(),n=E({loading:!1,loadingCreate:!1}),_=N([]);_.value=o().Compte_transactions;const{toast:c}=b(),T=S(()=>o().Compte_transactions),h=a=>{let e;const t=[];return Object.keys(a).forEach(s=>{s.includes("paiement_")&&t.push(s),a[s]!=null&&(e=s.split("-").length!=1?s.split("-")[1]:s.split("-")[0])}),e},l=a=>a.map(e=>{var t;return{id:e.id,banque:(t=e.banque)==null?void 0:t.nom,montant:e.montant,type_transaction:`<p class="' py-1  capitalize max-w-min rounded-md px-4 flex justify-center font-bold text-xs text-white ' ${e.type_transaction!=="entree"?"bg-red-500":"bg-green-500"}">${e.type_transaction}</p>`,type_paiement:h(e),date_creation:k(e.created_at).format("l")}});return{FindCompte_transactionAll:()=>{n.loading=!0,m(p.BANQUE_TRANSACTION_LIST).then(a=>{o().Compte_transactions=l(a.datas),n.loading=!1}).catch(()=>{n.loading=!1})},CreateCompte_transaction:async a=>(n.loadingCreate=!0,{data:await d(p.BANQUE_TRANSACTION_CREATE,a).then(t=>{if(t){r(a),n.loadingCreate=!1;let s=o().Compte_transactions;const y=l([t.data]);s.unshift(...y),o().Compte_transactions=s,x().open=!1,c({title:"EnregistrÃ©",description:t.message})}}).catch(t=>{if(n.loadingCreate=!1,console.log(t),t){const s=Object.keys(t.response.data.errors);c(s?{title:s[0],variant:"destructive",description:t.response.data.errors[s[0]][0]}:{title:"Erreur",variant:"destructive",description:t.response.data.message})}})}),Compte_transactionUpdate:(a,e)=>{u(n,o(),"Compte_transactions",l).SetUpdate(p.BANQUE_TRANSACTION_UPDATE,a,e)},Compte_transactionDelete:a=>{u(n,o(),"Compte_transactions",l).SetDelete(p.BANQUE_TRANSACTION_REMOVE,a)},stateCompte_transactions:_,setCompte_transaction:n,storeCompte_transactions:T}},P={class:"flex flex-col w-full gap-4 bg-white rounded-lg mb-8"},X=I({__name:"compte_transaction_compta.page",setup(m){const{FindCompte_transactionAll:d,storeCompte_transactions:r,setCompte_transaction:n}=F();return B(()=>{d()}),(_,c)=>(A(),C(O,null,{content:f(()=>[v("section",P,[g(w,{title:"COMPTABILITES | Transactions bancaire"},{created:f(()=>[]),_:1}),i(r).length!=0?(A(),C(M,{key:0,dataTables:i(r),MenuActions:i(R),display:i(j)},null,8,["dataTables","MenuActions","display"])):$("",!0),g(V,{loading:i(n).loading,data:i(r),name:"Aucune Compte_transactions"},null,8,["loading","data"])])]),_:1}))}});export{X as default};
