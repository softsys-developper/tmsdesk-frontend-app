import{r as C,a as b,u as r,b as h,c as T,A as v,d as x,e as y,f as S,g as F,o as D,h as L,w as f,_ as E,i as p,j as I,k as g,l as k,m as i,n as w,M,p as N,q as O}from"./index-D9k1Ji78.js";const $=[{label:"Libellé",field:"libelle",status:null,color:null,bgColor:null}],B=()=>{const{readData:u,createData:c}=y(),{EmptyFields:o}=S(),a=C({loading:!1,loadingCreate:!1}),d=b([]);d.value=r().Livraisons;const{toast:l}=h(),_=t=>t.map(e=>({numero_bon_de_caisse:e.numero_bon_de_caisse,designation:e.designation,recepteur:e.recepteur,montant:e.montant,type_transaction:`<p class="' py-1  capitalize max-w-min rounded-md px-4 flex justify-center font-bold text-xs text-white ' ${e.type_transaction!=="entree"?"bg-red-500":"bg-green-500"}">${e.type_transaction}</p>`,date_transaction:e.date_transaction})),m=T(()=>r().Livraisons);return{FindLivraisonAll:()=>{a.loading=!0,u(v.CAISSE_TRANSACTION_LIST).then(t=>{r().Livraisons=_(t.datas),a.loading=!1}).catch(()=>{a.loading=!1})},FindLivraisonOne:()=>{},CreateLivraison:async t=>(a.loadingCreate=!0,{data:await c(v.CAISSE_TRANSACTION_CREATE,t).then(s=>{if(s){o(t),a.loadingCreate=!1;let n=r().Livraisons;const A=_([s.data]);n.unshift(...A),r().Livraisons=n,x().open=!1,l({title:"Enregistré",description:s.message})}}).catch(s=>{if(a.loadingCreate=!1,s){const n=Object.keys(s.response.data.errors);l(n?{title:n[0],variant:"destructive",description:s.response.data.errors[n[0]][0]}:{title:"error",variant:"destructive",description:s.response.data.message})}})}),FindLivraisonUpdate:()=>{},FindLivraisonDelete:()=>{},stateLivraisons:d,setLivraison:a,storeLivraisons:m}},R={class:"flex flex-col w-full gap-4 bg-white rounded-lg mb-8"},z=F({__name:"livraison_logic.page",setup(u){const{FindLivraisonAll:c,storeLivraisons:o,setLivraison:a}=B();return D(()=>{c()}),(d,l)=>(p(),L(E,null,{content:f(()=>[I("section",R,[g(k,{title:"COMPTABILITES | Livraisons"},{created:f(()=>[]),_:1}),i(o).length!=0?(p(),L(w,{key:0,dataTables:i(o),MenuActions:i(M),display:i($)},null,8,["dataTables","MenuActions","display"])):N("",!0),g(O,{loading:i(a).loading,data:i(o),name:"Aucune Livraisons"},null,8,["loading","data"])])]),_:1}))}});export{z as default};
