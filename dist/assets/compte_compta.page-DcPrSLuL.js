import{r as v,a as S,u,b as F,c as k,A as b,d as B,e as L,f as D,g as T,x as I,y as M,z as N,B as w,o as x,C as j,i as A,h,w as i,j as y,k as s,m as e,D as U,E as V,F as q,G as H,H as P,I as G,J as O,K as Q,L as R,_ as z,l as J,n as K,M as W,p as X,q as Y}from"./index-D-gqvFjP.js";const E=()=>{const{readData:C,createData:d}=L(),{EmptyFields:n}=D(),t=v({loading:!1,loadingCreate:!1}),m=S([]);m.value=u().Comptes;const{toast:o}=F(),f=k(()=>u().Comptes),l=c=>c.map(_=>({id:_.id,nom:_.nom,solde:_.solde}));return{FindCompteAll:()=>{t.loading=!0,C(b.BANQUE_LIST).then(c=>{u().Comptes=l(c.datas),t.loading=!1}).catch(()=>{t.loading=!1})},CreateCompte:async c=>(t.loadingCreate=!0,{data:await d(b.BANQUE_CREATE,c).then(a=>{if(a){n(c),t.loadingCreate=!1;let r=u().Comptes;const $=l([a.data]);r.unshift(...$),u().Comptes=r,B().open=!1,o({title:"Enregistré",description:a.message})}}).catch(a=>{if(t.loadingCreate=!1,console.log(a),a){const r=Object.keys(a.response.data.errors);o(r?{title:r[0],variant:"destructive",description:a.response.data.errors[r[0]][0]}:{title:"Erreur",variant:"destructive",description:a.response.data.message})}})}),stateComptes:m,setCompte:t,storeComptes:f}},Z=T({__name:"compte.modal",setup(C){const d=I(M({nom:N().min(1,"Le nom du compte banque est requise.")})),{handleSubmit:n}=w({validationSchema:d}),{CreateCompte:t,setCompte:m}=E(),o=n(l=>{t(l)}),f=S({libelle:"",id:""});return x(()=>{j.get(b.CAISSE_LIST).then(({data:l})=>f.value=l.data)}),(l,g)=>(A(),h(R,{Func:e(o),loading:e(m).loadingCreate},{form:i(()=>[y("form",{class:"w-full space-y-2",onSubmit:g[0]||(g[0]=(...p)=>e(o)&&e(o)(...p))},[s(e(Q),{name:"nom"},{default:i(({componentField:p})=>[s(e(U),null,{default:i(()=>[s(e(V),null,{default:i(()=>[q("Libelle du compte")]),_:1}),s(e(H),null,{default:i(()=>[s(e(P),G({id:"nom",placeholder:"GTBank Côte d'ivoire",type:"text"},p),null,16)]),_:2},1024),s(e(O),{class:"text-xs"})]),_:2},1024)]),_:1})],32)]),_:1},8,["Func","loading"]))}}),ee=[{label:"N*",field:"id",status:null,color:null,bgColor:null},{label:"Libellés",field:"nom",status:null,color:null,bgColor:null},{label:"soldes",field:"solde",status:null,color:null,bgColor:null}],te={class:"flex flex-col w-full gap-4 bg-white rounded-lg mb-8"},se=T({__name:"compte_compta.page",setup(C){const{FindCompteAll:d,storeComptes:n,setCompte:t}=E();return x(()=>{d()}),(m,o)=>(A(),h(z,null,{content:i(()=>[y("section",te,[s(J,{title:"COMPTABILITES | Comptes bancaire"},{created:i(()=>[s(Z,{name:"Ajouter un compte",title:"Ajouter un nouvel compte"})]),_:1}),e(n).length!=0?(A(),h(K,{key:0,dataTables:e(n),MenuActions:e(W),display:e(ee)},null,8,["dataTables","MenuActions","display"])):X("",!0),s(Y,{loading:e(t).loading,data:e(n),name:"Aucune Comptes"},null,8,["loading","data"])])]),_:1}))}});export{se as default};
