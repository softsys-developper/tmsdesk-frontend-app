import{P as $,Q as x,ab as d,O as L,s as w,R as m,ad as j,ag as D,S as v,ae as y,ac as I,d as U,o as E,a as g,c as h,w as C,b as O,V as A,W as B,e as k,X as N,u as t,Y as R,ah as V,g as f,_ as K,f as P,h as q,i as H,ai as Q,j as W,k as X}from"./index-ComBqq_p.js";const Y=[{label:"ID",field:"id",status:null,color:null,bgColor:null},{label:"Libellé",field:"libelle",status:null,color:null,bgColor:null},{label:"Catégories",field:"categorie",status:null,color:null,bgColor:null},{label:"Date de creation",field:"date_creation",status:null,color:null,bgColor:null}],F=()=>{const{readData:b,createData:p}=v(),{EmptyFields:n}=y(),e=$({loading:!1,loadingCreate:!1}),u=x([]);u.value=d().Stocks;const{toast:_}=L(),c=a=>a.map((o,s)=>{var l;return{id:s+1,libelle:o.libelle,categorie:(l=o.categorie)==null?void 0:l.libelle,telephone:o.telephone,adresse:o.adresse,date_creation:I(o.created_at).format("l")}}),S=w(()=>d().Stocks);return{FindStockAll:()=>{e.loading=!0,b(m.STOCK_LIST).then(a=>{d().Stocks=c(a.datas),e.loading=!1}).catch(()=>{e.loading=!1})},FindStockOne:()=>{},CreateStock:async a=>(e.loadingCreate=!0,{data:await p(m.STOCK_CREATE,a).then(s=>{if(s){n(a),e.loadingCreate=!1;let l=d().Stocks;const M=c([s.data]);l.unshift(...M),d().Stocks=l,j().open=!1,_({title:"Enregistré",description:s.message})}}).catch(s=>{if(e.loadingCreate=!1,s){const l=Object.keys(s.response.data.errors);_(l?{title:l[0],variant:"destructive",description:s.response.data.errors[l[0]][0]}:{title:"error",variant:"destructive",description:s.response.data.message})}})}),StockUpdate:(a,o)=>{D(e,d(),"Stocks",c).SetUpdate(m.STOCK_UPDATE,a,o)},StockDelete:a=>{D(e,d(),"Stocks",c).SetDelete(m.STOCK_REMOVE,a)},stateStocks:u,setStock:e,storeStocks:S}},T=[{label:"Libelle Marque",type:"text",placeholder:"Nom du role",name:"libelle",value:"",select:[]},{label:"Libelle Marque",type:"text",placeholder:"Nom du role",name:"categorie_id",value:"",select:[]}],z={class:"w-full space-y-2"},G={class:""},J=U({__name:"stock.modal",setup(b){const{CreateStock:p,StockUpdate:n,setStock:e}=F(),{readData:u}=v(),{remplacerObjetDansTableau:_}=y(),c=S=>{let i=new FormData(S.target);f().isUpdate.is?n(f().isUpdate.id,i):p(i)};return E(()=>{u(m.USER_LIST).then(S=>_(T,"name","categorie_id",S.datas.map(i=>({id:i.id,name:i.name}))))}),(S,i)=>(g(),h(V,{Func:c,loading:t(e).loadingCreate},{form:C(()=>[O("div",z,[(g(!0),A(R,null,B(t(T),r=>(g(),A("div",G,[k(N,{title:r.label,name:r.name,label:r.label,type:r.type,placeholder:r.placeholder,select:r.select},null,8,["title","name","label","type","placeholder","select"])]))),256))])]),_:1},8,["loading"]))}}),Z={class:"flex flex-col w-full gap-4 bg-white rounded-lg mb-8"},le=U({__name:"stock_logic.page",setup(b){const{FindStockAll:p,storeStocks:n,StockDelete:e,setStock:u}=F();return E(()=>{p()}),(_,c)=>(g(),h(K,null,{content:C(()=>[O("section",Z,[k(q,{title:"COMPTABILITES | Stock"},{created:C(()=>[k(J,{name:"Ajouter une stock",title:t(f)().isUpdate.is?"Modifier Stocks":"Ajouter Stocks"},null,8,["title"]),k(P,{title:"Ajouter un nouvel categorie",funDelete:t(e),id:t(f)().isDelete.id},null,8,["funDelete","id"])]),_:1}),t(n).length!=0?(g(),h(H,{key:0,dataTables:t(n),MenuActions:t(Q),display:t(Y)},null,8,["dataTables","MenuActions","display"])):W("",!0),k(X,{loading:t(u).loading,data:t(n),name:"Aucune transaction"},null,8,["loading","data"])])]),_:1}))}});export{le as default};
