import{P as $,Q as x,ab as d,O as I,s as w,R as S,ad as N,ag as D,S as U,ae as v,ac as O,d as T,o as y,a as g,c as h,w as C,b as M,V as A,W as R,e as k,X as j,u as t,Y as B,ah as V,g as f,_ as P,f as Q,h as q,i as H,ai as W,j as X,k as Y}from"./index-Bbn12I5f.js";const z=[{label:"ID",field:"id",status:null,color:null,bgColor:null},{label:"Libellé",field:"libelle",status:null,color:null,bgColor:null},{label:"Catégories",field:"categorie",status:null,color:null,bgColor:null},{label:"Date de creation",field:"date_creation",status:null,color:null,bgColor:null}],F=()=>{const{readData:b,createData:m}=U(),{EmptyFields:n}=v(),e=$({loading:!1,loadingCreate:!1}),u=x([]);u.value=d().Stocks;const{toast:_}=I(),c=a=>a.map((o,s)=>{var l;return{id:s+1,libelle:o.libelle,categorie:(l=o.categorie)==null?void 0:l.libelle,telephone:o.telephone,adresse:o.adresse,date_creation:O(o.created_at).format("l")}}),p=w(()=>d().Stocks);return{FindStockAll:()=>{e.loading=!0,b(S.MARQUE_LIST).then(a=>{d().Stocks=c(a.datas),e.loading=!1}).catch(()=>{e.loading=!1})},FindStockOne:()=>{},CreateStock:async a=>(e.loadingCreate=!0,{data:await m(S.MARQUE_CREATE,a).then(s=>{if(s){n(a),e.loadingCreate=!1;let l=d().Stocks;const L=c([s.data]);l.unshift(...L),d().Stocks=l,N().open=!1,_({title:"Enregistré",description:s.message})}}).catch(s=>{if(e.loadingCreate=!1,s){const l=Object.keys(s.response.data.errors);_(l?{title:l[0],variant:"destructive",description:s.response.data.errors[l[0]][0]}:{title:"error",variant:"destructive",description:s.response.data.message})}})}),StockUpdate:(a,o)=>{D(e,d(),"Stocks",c).SetUpdate(S.CLIENT_UPDATE,a,o)},StockDelete:a=>{D(e,d(),"Stocks",c).SetDelete(S.CLIENT_REMOVE,a)},stateStocks:u,setStock:e,storeStocks:p}},E=[{label:"Libelle Marque",type:"text",placeholder:"Nom du role",name:"libelle",value:"",select:[]},{label:"Libelle Marque",type:"text",placeholder:"Nom du role",name:"categorie_id",value:"",select:[]}],G={class:"w-full space-y-2"},J={class:""},K=T({__name:"stock.modal",setup(b){const{CreateStock:m,StockUpdate:n,setStock:e}=F(),{readData:u}=U(),{remplacerObjetDansTableau:_}=v(),c=p=>{let i=new FormData(p.target);f().isUpdate.is?n(f().isUpdate.id,i):m(i)};return y(()=>{u(S.USER_LIST).then(p=>_(E,"name","categorie_id",p.datas.map(i=>({id:i.id,name:i.name}))))}),(p,i)=>(g(),h(V,{Func:c,loading:t(e).loadingCreate},{form:C(()=>[M("div",G,[(g(!0),A(B,null,R(t(E),r=>(g(),A("div",J,[k(j,{title:r.label,name:r.name,label:r.label,type:r.type,placeholder:r.placeholder,select:r.select},null,8,["title","name","label","type","placeholder","select"])]))),256))])]),_:1},8,["loading"]))}}),Z={class:"flex flex-col w-full gap-4 bg-white rounded-lg mb-8"},le=T({__name:"stock_logic.page",setup(b){const{FindStockAll:m,storeStocks:n,StockDelete:e,setStock:u}=F();return y(()=>{m()}),(_,c)=>(g(),h(P,null,{content:C(()=>[M("section",Z,[k(q,{title:"COMPTABILITES | Stock"},{created:C(()=>[k(K,{name:"Ajouter une stock",title:t(f)().isUpdate.is?"Modifier Stocks":"Ajouter Stocks"},null,8,["title"]),k(Q,{title:"Ajouter un nouvel categorie",funDelete:t(e),id:t(f)().isDelete.id},null,8,["funDelete","id"])]),_:1}),t(n).length!=0?(g(),h(H,{key:0,dataTables:t(n),MenuActions:t(W),display:t(z)},null,8,["dataTables","MenuActions","display"])):X("",!0),k(Y,{loading:t(u).loading,data:t(n),name:"Aucune transaction"},null,8,["loading","data"])])]),_:1}))}});export{le as default};
